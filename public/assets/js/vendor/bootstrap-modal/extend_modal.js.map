{"version":3,"sources":["bootstrap-modal.js","bootstrap-modalmanager.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"extend_modal.js","sourcesContent":["/* ===========================================================\n * bootstrap-modal.js v2.2.5\n * ===========================================================\n * Copyright 2012 Jordan Schroter\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n\n!function ($) {\n\n\t\"use strict\"; // jshint ;_;\n\n\t/* MODAL CLASS DEFINITION\n\t* ====================== */\n\n\tvar Modal = function (element, options) {\n\t\tthis.init(element, options);\n\t};\n\n\tModal.prototype = {\n\n\t\tconstructor: Modal,\n\n\t\tinit: function (element, options) {\n\t\t\tvar that = this;\n\n\t\t\tthis.options = options;\n\n\t\t\tthis.$element = $(element)\n\t\t\t\t.delegate('[data-dismiss=\"modal\"]', 'click.dismiss.modal', $.proxy(this.hide, this));\n\n\t\t\tthis.options.remote && this.$element.find('.modal-body').load(this.options.remote, function () {\n\t\t\t\tvar e = $.Event('loaded');\n\t\t\t\tthat.$element.trigger(e);\n\t\t\t});\n\n\t\t\tvar manager = typeof this.options.manager === 'function' ?\n\t\t\t\tthis.options.manager.call(this) : this.options.manager;\n\n\t\t\tmanager = manager.appendModal ?\n\t\t\t\tmanager : $(manager).modalmanager().data('modalmanager');\n\n\t\t\tmanager.appendModal(this);\n\t\t},\n\n\t\ttoggle: function () {\n\t\t\treturn this[!this.isShown ? 'show' : 'hide']();\n\t\t},\n\n\t\tshow: function () {\n\t\t\tvar e = $.Event('show');\n\n\t\t\tif (this.isShown) return;\n\n\t\t\tthis.$element.trigger(e);\n\n\t\t\tif (e.isDefaultPrevented()) return;\n\n\t\t\tthis.escape();\n\n\t\t\tthis.tab();\n\n\t\t\tthis.options.loading && this.loading();\n\t\t},\n\n\t\thide: function (e) {\n\t\t\te && e.preventDefault();\n\n\t\t\te = $.Event('hide');\n\n\t\t\tthis.$element.trigger(e);\n\n\t\t\tif (!this.isShown || e.isDefaultPrevented()) return;\n\n\t\t\tthis.isShown = false;\n\n\t\t\tthis.escape();\n\n\t\t\tthis.tab();\n\n\t\t\tthis.isLoading && this.loading();\n\n\t\t\t$(document).off('focusin.modal');\n\n\t\t\tthis.$element\n\t\t\t\t.removeClass('in')\n\t\t\t\t.removeClass('animated')\n\t\t\t\t.removeClass(this.options.attentionAnimation)\n\t\t\t\t.removeClass('modal-overflow')\n\t\t\t\t.attr('aria-hidden', true);\n\n\t\t\t$.support.transition && this.$element.hasClass('fade') ?\n\t\t\t\tthis.hideWithTransition() :\n\t\t\t\tthis.hideModal();\n\t\t},\n\n\t\tlayout: function () {\n\t\t\tvar prop = this.options.height ? 'height' : 'max-height',\n\t\t\t\tvalue = this.options.height || this.options.maxHeight;\n\n\t\t\tif (this.options.width){\n\t\t\t\tthis.$element.css('width', this.options.width);\n\n\t\t\t\tvar that = this;\n\t\t\t\tthis.$element.css('margin-left', function () {\n\t\t\t\t\tif (/%/ig.test(that.options.width)){\n\t\t\t\t\t\treturn -(parseInt(that.options.width) / 2) + '%';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn -($(this).width() / 2) + 'px';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.$element.css('width', '');\n\t\t\t\tthis.$element.css('margin-left', '');\n\t\t\t}\n\n\t\t\tthis.$element.find('.modal-body')\n\t\t\t\t.css('overflow', '')\n\t\t\t\t.css(prop, '');\n\n\t\t\tif (value){\n\t\t\t\tthis.$element.find('.modal-body')\n\t\t\t\t\t.css('overflow', 'auto')\n\t\t\t\t\t.css(prop, value);\n\t\t\t}\n\n\t\t\tvar modalOverflow = $(window).height() - 10 < this.$element.height();\n            \n\t\t\tif (modalOverflow || this.options.modalOverflow) {\n\t\t\t\tthis.$element\n\t\t\t\t\t.css('margin-top', 0)\n\t\t\t\t\t.addClass('modal-overflow');\n\t\t\t} else {\n\t\t\t\tthis.$element\n\t\t\t\t\t.css('margin-top', 0 - this.$element.height() / 2)\n\t\t\t\t\t.removeClass('modal-overflow');\n\t\t\t}\n\t\t},\n\n\t\ttab: function () {\n\t\t\tvar that = this;\n\n\t\t\tif (this.isShown && this.options.consumeTab) {\n\t\t\t\tthis.$element.on('keydown.tabindex.modal', '[data-tabindex]', function (e) {\n\t\t\t    \tif (e.keyCode && e.keyCode == 9){\n\t\t\t\t\t\tvar elements = [],\n\t\t\t\t\t\t\ttabindex = Number($(this).data('tabindex'));\n\n\t\t\t\t\t\tthat.$element.find('[data-tabindex]:enabled:visible:not([readonly])').each(function (ev) {\n\t\t\t\t\t\t\telements.push(Number($(this).data('tabindex')));\n\t\t\t\t\t\t});\n\t\t\t\t\t\telements.sort(function(a,b){return a-b});\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar arrayPos = $.inArray(tabindex, elements);\n\t\t\t\t\t\tif (!e.shiftKey){\n\t\t\t\t\t\t \t\tarrayPos < elements.length-1 ?\n\t\t\t\t\t\t\t\t\tthat.$element.find('[data-tabindex='+elements[arrayPos+1]+']').focus() :\n\t\t\t\t\t\t\t\t\tthat.$element.find('[data-tabindex='+elements[0]+']').focus();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tarrayPos == 0 ?\n\t\t\t\t\t\t\t\t\tthat.$element.find('[data-tabindex='+elements[elements.length-1]+']').focus() :\n\t\t\t\t\t\t\t\t\tthat.$element.find('[data-tabindex='+elements[arrayPos-1]+']').focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (!this.isShown) {\n\t\t\t\tthis.$element.off('keydown.tabindex.modal');\n\t\t\t}\n\t\t},\n\n\t\tescape: function () {\n\t\t\tvar that = this;\n\t\t\tif (this.isShown && this.options.keyboard) {\n\t\t\t\tif (!this.$element.attr('tabindex')) this.$element.attr('tabindex', -1);\n\n\t\t\t\tthis.$element.on('keyup.dismiss.modal', function (e) {\n\t\t\t\t\te.which == 27 && that.hide();\n\t\t\t\t});\n\t\t\t} else if (!this.isShown) {\n\t\t\t\tthis.$element.off('keyup.dismiss.modal')\n\t\t\t}\n\t\t},\n\n\t\thideWithTransition: function () {\n\t\t\tvar that = this\n\t\t\t\t, timeout = setTimeout(function () {\n\t\t\t\t\tthat.$element.off($.support.transition.end);\n\t\t\t\t\tthat.hideModal();\n\t\t\t\t}, 500);\n\n\t\t\tthis.$element.one($.support.transition.end, function () {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\tthat.hideModal();\n\t\t\t});\n\t\t},\n\n\t\thideModal: function () {\n\t\t\tvar prop = this.options.height ? 'height' : 'max-height';\n\t\t\tvar value = this.options.height || this.options.maxHeight;\n\n\t\t\tif (value){\n\t\t\t\tthis.$element.find('.modal-body')\n\t\t\t\t\t.css('overflow', '')\n\t\t\t\t\t.css(prop, '');\n\t\t\t}\n\n\t\t\tthis.$element\n\t\t\t\t.hide()\n\t\t\t\t.trigger('hidden');\n\t\t},\n\n\t\tremoveLoading: function () {\n\t\t\tthis.$loading.remove();\n\t\t\tthis.$loading = null;\n\t\t\tthis.isLoading = false;\n\t\t},\n\n\t\tloading: function (callback) {\n\t\t\tcallback = callback || function () {};\n\n\t\t\tvar animate = this.$element.hasClass('fade') ? 'fade' : '';\n\n\t\t\tif (!this.isLoading) {\n\t\t\t\tvar doAnimate = $.support.transition && animate;\n\n\t\t\t\tthis.$loading = $('<div class=\"loading-mask ' + animate + '\">')\n\t\t\t\t\t.append(this.options.spinner)\n\t\t\t\t\t.appendTo(this.$element);\n\n\t\t\t\tif (doAnimate) this.$loading[0].offsetWidth; // force reflow\n\n\t\t\t\tthis.$loading.addClass('in');\n\n\t\t\t\tthis.isLoading = true;\n\n\t\t\t\tdoAnimate ?\n\t\t\t\t\tthis.$loading.one($.support.transition.end, callback) :\n\t\t\t\t\tcallback();\n\n\t\t\t} else if (this.isLoading && this.$loading) {\n\t\t\t\tthis.$loading.removeClass('in');\n\n\t\t\t\tvar that = this;\n\t\t\t\t$.support.transition && this.$element.hasClass('fade')?\n\t\t\t\t\tthis.$loading.one($.support.transition.end, function () { that.removeLoading() }) :\n\t\t\t\t\tthat.removeLoading();\n\n\t\t\t} else if (callback) {\n\t\t\t\tcallback(this.isLoading);\n\t\t\t}\n\t\t},\n\n\t\tfocus: function () {\n\t\t\tvar $focusElem = this.$element.find(this.options.focusOn);\n\n\t\t\t$focusElem = $focusElem.length ? $focusElem : this.$element;\n\n\t\t\t$focusElem.focus();\n\t\t},\n\n\t\tattention: function (){\n\t\t\t// NOTE: transitionEnd with keyframes causes odd behaviour\n\n\t\t\tif (this.options.attentionAnimation){\n\t\t\t\tthis.$element\n\t\t\t\t\t.removeClass('animated')\n\t\t\t\t\t.removeClass(this.options.attentionAnimation);\n\n\t\t\t\tvar that = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tthat.$element\n\t\t\t\t\t\t.addClass('animated')\n\t\t\t\t\t\t.addClass(that.options.attentionAnimation);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\n\t\t\tthis.focus();\n\t\t},\n\n\n\t\tdestroy: function () {\n\t\t\tvar e = $.Event('destroy');\n\n\t\t\tthis.$element.trigger(e);\n\n\t\t\tif (e.isDefaultPrevented()) return;\n\n\t\t\tthis.$element\n\t\t\t\t.off('.modal')\n\t\t\t\t.removeData('modal')\n\t\t\t\t.removeClass('in')\n\t\t\t\t.attr('aria-hidden', true);\n\t\t\t\n\t\t\tif (this.$parent !== this.$element.parent()) {\n\t\t\t\tthis.$element.appendTo(this.$parent);\n\t\t\t} else if (!this.$parent.length) {\n\t\t\t\t// modal is not part of the DOM so remove it.\n\t\t\t\tthis.$element.remove();\n\t\t\t\tthis.$element = null;\n\t\t\t}\n\n\t\t\tthis.$element.trigger('destroyed');\n\t\t}\n\t};\n\n\n\t/* MODAL PLUGIN DEFINITION\n\t* ======================= */\n\n\t$.fn.modal = function (option, args) {\n\t\treturn this.each(function () {\n\t\t\tvar $this = $(this),\n\t\t\t\tdata = $this.data('modal'),\n\t\t\t\toptions = $.extend({}, $.fn.modal.defaults, $this.data(), typeof option == 'object' && option);\n\n\t\t\tif (!data) $this.data('modal', (data = new Modal(this, options)));\n\t\t\tif (typeof option == 'string') data[option].apply(data, [].concat(args));\n\t\t\telse if (options.show) data.show()\n\t\t})\n\t};\n\n\t$.fn.modal.defaults = {\n\t\tkeyboard: true,\n\t\tbackdrop: true,\n\t\tloading: false,\n\t\tshow: true,\n\t\twidth: null,\n\t\theight: null,\n\t\tmaxHeight: null,\n\t\tmodalOverflow: false,\n\t\tconsumeTab: true,\n\t\tfocusOn: null,\n\t\treplace: false,\n\t\tresize: false,\n\t\tattentionAnimation: 'shake',\n\t\tmanager: 'body',\n\t\tspinner: '<div class=\"loading-spinner\" style=\"width: 200px; margin-left: -100px;\"><div class=\"progress progress-striped active\"><div class=\"bar\" style=\"width: 100%;\"></div></div></div>',\n\t\tbackdropTemplate: '<div class=\"modal-backdrop\" />'\n\t};\n\n\t$.fn.modal.Constructor = Modal;\n\n\n\t/* MODAL DATA-API\n\t* ============== */\n\n\t$(function () {\n\t\t$(document).off('click.modal').on('click.modal.data-api', '[data-toggle=\"modal\"]', function ( e ) {\n\t\t\tvar $this = $(this),\n\t\t\t\thref = $this.attr('href'),\n\t\t\t\t$target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))), //strip for ie7\n\t\t\t\toption = $target.data('modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data());\n\n\t\t\te.preventDefault();\n\t\t\t$target\n\t\t\t\t.modal(option)\n\t\t\t\t.one('hide', function () {\n\t\t\t\t\t$this.focus();\n\t\t\t\t})\n\t\t});\n\t});\n\n}(window.jQuery);\n","/* ===========================================================\n * bootstrap-modalmanager.js v2.2.5\n * ===========================================================\n * Copyright 2012 Jordan Schroter.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ========================================================== */\n\n!function ($) {\n\n\t\"use strict\"; // jshint ;_;\n\n\t/* MODAL MANAGER CLASS DEFINITION\n\t* ====================== */\n\n\tvar ModalManager = function (element, options) {\n\t\tthis.init(element, options);\n\t};\n\n\tModalManager.prototype = {\n\n\t\tconstructor: ModalManager,\n\n\t\tinit: function (element, options) {\n\t\t\tthis.$element = $(element);\n\t\t\tthis.options = $.extend({}, $.fn.modalmanager.defaults, this.$element.data(), typeof options == 'object' && options);\n\t\t\tthis.stack = [];\n\t\t\tthis.backdropCount = 0;\n\n\t\t\tif (this.options.resize) {\n\t\t\t\tvar resizeTimeout,\n\t\t\t\t\tthat = this;\n\n\t\t\t\t$(window).on('resize.modal', function(){\n\t\t\t\t\tresizeTimeout && clearTimeout(resizeTimeout);\n\t\t\t\t\tresizeTimeout = setTimeout(function(){\n\t\t\t\t\t\tfor (var i = 0; i < that.stack.length; i++){\n\t\t\t\t\t\t\tthat.stack[i].isShown && that.stack[i].layout();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tcreateModal: function (element, options) {\n\t\t\t$(element).modal($.extend({ manager: this }, options));\n\t\t},\n\n\t\tappendModal: function (modal) {\n\t\t\tthis.stack.push(modal);\n\n\t\t\tvar that = this;\n\n\t\t\tmodal.$element.on('show.modalmanager', targetIsSelf(function (e) {\n\n\t\t\t\tvar showModal = function(){\n\t\t\t\t\tmodal.isShown = true;\n\n\t\t\t\t\tvar transition = $.support.transition && modal.$element.hasClass('fade');\n\n\t\t\t\t\tthat.$element\n\t\t\t\t\t\t.toggleClass('modal-open', that.hasOpenModal())\n\t\t\t\t\t\t.toggleClass('page-overflow', $(window).height() < that.$element.height());\n\n\t\t\t\t\tmodal.$parent = modal.$element.parent();\n\n\t\t\t\t\tmodal.$container = that.createContainer(modal);\n\n\t\t\t\t\tmodal.$element.appendTo(modal.$container);\n\n\t\t\t\t\tthat.backdrop(modal, function () {\n\t\t\t\t\t\tmodal.$element.show();\n\n\t\t\t\t\t\tif (transition) {       \n\t\t\t\t\t\t\t//modal.$element[0].style.display = 'run-in';       \n\t\t\t\t\t\t\tmodal.$element[0].offsetWidth;\n\t\t\t\t\t\t\t//modal.$element.one($.support.transition.end, function () { modal.$element[0].style.display = 'block' });  \n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tmodal.layout();\n\n\t\t\t\t\t\tmodal.$element\n\t\t\t\t\t\t\t.addClass('in')\n\t\t\t\t\t\t\t.attr('aria-hidden', false);\n\n\t\t\t\t\t\tvar complete = function () {\n\t\t\t\t\t\t\tthat.setFocus();\n\t\t\t\t\t\t\tmodal.$element.trigger('shown');\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\ttransition ?\n\t\t\t\t\t\t\tmodal.$element.one($.support.transition.end, complete) :\n\t\t\t\t\t\t\tcomplete();\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tmodal.options.replace ?\n\t\t\t\t\tthat.replace(showModal) :\n\t\t\t\t\tshowModal();\n\t\t\t}));\n\n\t\t\tmodal.$element.on('hidden.modalmanager', targetIsSelf(function (e) {\n\t\t\t\tthat.backdrop(modal);\n\t\t\t\t// handle the case when a modal may have been removed from the dom before this callback executes\n\t\t\t\tif (!modal.$element.parent().length) {\n\t\t\t\t\tthat.destroyModal(modal);\n\t\t\t\t} else if (modal.$backdrop){\n\t\t\t\t\tvar transition = $.support.transition && modal.$element.hasClass('fade');\n\n\t\t\t\t\t// trigger a relayout due to firebox's buggy transition end event \n\t\t\t\t\tif (transition) { modal.$element[0].offsetWidth; }\n\t\t\t\t\t$.support.transition && modal.$element.hasClass('fade') ?\n\t\t\t\t\t\tmodal.$backdrop.one($.support.transition.end, function () { modal.destroy(); }) :\n\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t} else {\n\t\t\t\t\tmodal.destroy();\n\t\t\t\t}\n\n\t\t\t}));\n\n\t\t\tmodal.$element.on('destroyed.modalmanager', targetIsSelf(function (e) {\n\t\t\t\tthat.destroyModal(modal);\n\t\t\t}));\n\t\t},\n\n\t\tgetOpenModals: function () {\n\t\t\tvar openModals = [];\n\t\t\tfor (var i = 0; i < this.stack.length; i++){\n\t\t\t\tif (this.stack[i].isShown) openModals.push(this.stack[i]);\n\t\t\t}\n\n\t\t\treturn openModals;\n\t\t},\n\n\t\thasOpenModal: function () {\n\t\t\treturn this.getOpenModals().length > 0;\n\t\t},\n\n\t\tsetFocus: function () {\n\t\t\tvar topModal;\n\n\t\t\tfor (var i = 0; i < this.stack.length; i++){\n\t\t\t\tif (this.stack[i].isShown) topModal = this.stack[i];\n\t\t\t}\n\n\t\t\tif (!topModal) return;\n\n\t\t\ttopModal.focus();\n\t\t},\n\n\t\tdestroyModal: function (modal) {\n\t\t\tmodal.$element.off('.modalmanager');\n\t\t\tif (modal.$backdrop) this.removeBackdrop(modal);\n\t\t\tthis.stack.splice(this.getIndexOfModal(modal), 1);\n\n\t\t\tvar hasOpenModal = this.hasOpenModal();\n\n\t\t\tthis.$element.toggleClass('modal-open', hasOpenModal);\n\n\t\t\tif (!hasOpenModal){\n\t\t\t\tthis.$element.removeClass('page-overflow');\n\t\t\t}\n\n\t\t\tthis.removeContainer(modal);\n\n\t\t\tthis.setFocus();\n\t\t},\n\n\t\tgetModalAt: function (index) {\n\t\t\treturn this.stack[index];\n\t\t},\n\n\t\tgetIndexOfModal: function (modal) {\n\t\t\tfor (var i = 0; i < this.stack.length; i++){\n\t\t\t\tif (modal === this.stack[i]) return i;\n\t\t\t}\n\t\t},\n\n\t\treplace: function (callback) {\n\t\t\tvar topModal;\n\n\t\t\tfor (var i = 0; i < this.stack.length; i++){\n\t\t\t\tif (this.stack[i].isShown) topModal = this.stack[i];\n\t\t\t}\n\n\t\t\tif (topModal) {\n\t\t\t\tthis.$backdropHandle = topModal.$backdrop;\n\t\t\t\ttopModal.$backdrop = null;\n\n\t\t\t\tcallback && topModal.$element.one('hidden',\n\t\t\t\t\ttargetIsSelf( $.proxy(callback, this) ));\n\n\t\t\t\ttopModal.hide();\n\t\t\t} else if (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t},\n\n\t\tremoveBackdrop: function (modal) {\n\t\t\tmodal.$backdrop.remove();\n\t\t\tmodal.$backdrop = null;\n\t\t},\n\n\t\tcreateBackdrop: function (animate, tmpl) {\n\t\t\tvar $backdrop;\n\n\t\t\tif (!this.$backdropHandle) {\n\t\t\t\t$backdrop = $(tmpl)\n\t\t\t\t\t.addClass(animate)\n\t\t\t\t\t.appendTo(this.$element);\n\t\t\t} else {\n\t\t\t\t$backdrop = this.$backdropHandle;\n\t\t\t\t$backdrop.off('.modalmanager');\n\t\t\t\tthis.$backdropHandle = null;\n\t\t\t\tthis.isLoading && this.removeSpinner();\n\t\t\t}\n\n\t\t\treturn $backdrop;\n\t\t},\n\n\t\tremoveContainer: function (modal) {\n\t\t\tmodal.$container.remove();\n\t\t\tmodal.$container = null;\n\t\t},\n\n\t\tcreateContainer: function (modal) {\n\t\t\tvar $container;\n\n\t\t\t$container = $('<div class=\"modal-scrollable\">')\n\t\t\t\t.css('z-index', getzIndex('modal', this.getOpenModals().length))\n\t\t\t\t.appendTo(this.$element);\n\n\t\t\tif (modal && modal.options.backdrop != 'static') {\n\t\t\t\t$container.on('click.modal', targetIsSelf(function (e) {\n\t\t\t\t\tmodal.hide();\n\t\t\t\t}));\n\t\t\t} else if (modal) {\n\t\t\t\t$container.on('click.modal', targetIsSelf(function (e) {\n\t\t\t\t\tmodal.attention();\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\treturn $container;\n\n\t\t},\n\n\t\tbackdrop: function (modal, callback) {\n\t\t\tvar animate = modal.$element.hasClass('fade') ? 'fade' : '',\n\t\t\t\tshowBackdrop = modal.options.backdrop &&\n\t\t\t\t\tthis.backdropCount < this.options.backdropLimit;\n\n\t\t\tif (modal.isShown && showBackdrop) {\n\t\t\t\tvar doAnimate = $.support.transition && animate && !this.$backdropHandle;\n\n\t\t\t\tmodal.$backdrop = this.createBackdrop(animate, modal.options.backdropTemplate);\n\n\t\t\t\tmodal.$backdrop.css('z-index', getzIndex( 'backdrop', this.getOpenModals().length ));\n\n\t\t\t\tif (doAnimate) modal.$backdrop[0].offsetWidth; // force reflow\n\n\t\t\t\tmodal.$backdrop.addClass('in');\n\n\t\t\t\tthis.backdropCount += 1;\n\n\t\t\t\tdoAnimate ?\n\t\t\t\t\tmodal.$backdrop.one($.support.transition.end, callback) :\n\t\t\t\t\tcallback();\n\n\t\t\t} else if (!modal.isShown && modal.$backdrop) {\n\t\t\t\tmodal.$backdrop.removeClass('in');\n\n\t\t\t\tthis.backdropCount -= 1;\n\n\t\t\t\tvar that = this;\n\n\t\t\t\t$.support.transition && modal.$element.hasClass('fade')?\n\t\t\t\t\tmodal.$backdrop.one($.support.transition.end, function () { that.removeBackdrop(modal) }) :\n\t\t\t\t\tthat.removeBackdrop(modal);\n\n\t\t\t} else if (callback) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t},\n\n\t\tremoveSpinner: function(){\n\t\t\tthis.$spinner && this.$spinner.remove();\n\t\t\tthis.$spinner = null;\n\t\t\tthis.isLoading = false;\n\t\t},\n\n\t\tremoveLoading: function () {\n\t\t\tthis.$backdropHandle && this.$backdropHandle.remove();\n\t\t\tthis.$backdropHandle = null;\n\t\t\tthis.removeSpinner();\n\t\t},\n\n\t\tloading: function (callback) {\n\t\t\tcallback = callback || function () { };\n\n\t\t\tthis.$element\n\t\t\t\t.toggleClass('modal-open', !this.isLoading || this.hasOpenModal())\n\t\t\t\t.toggleClass('page-overflow', $(window).height() < this.$element.height());\n\n\t\t\tif (!this.isLoading) {\n\n\t\t\t\tthis.$backdropHandle = this.createBackdrop('fade', this.options.backdropTemplate);\n\n\t\t\t\tthis.$backdropHandle[0].offsetWidth; // force reflow\n\n\t\t\t\tvar openModals = this.getOpenModals();\n\n\t\t\t\tthis.$backdropHandle\n\t\t\t\t\t.css('z-index', getzIndex('backdrop', openModals.length + 1))\n\t\t\t\t\t.addClass('in');\n\n\t\t\t\tvar $spinner = $(this.options.spinner)\n\t\t\t\t\t.css('z-index', getzIndex('modal', openModals.length + 1))\n\t\t\t\t\t.appendTo(this.$element)\n\t\t\t\t\t.addClass('in');\n\n\t\t\t\tthis.$spinner = $(this.createContainer())\n\t\t\t\t\t.append($spinner)\n\t\t\t\t\t.on('click.modalmanager', $.proxy(this.loading, this));\n\n\t\t\t\tthis.isLoading = true;\n\n\t\t\t\t$.support.transition ?\n\t\t\t\t\tthis.$backdropHandle.one($.support.transition.end, callback) :\n\t\t\t\t\tcallback();\n\n\t\t\t} else if (this.isLoading && this.$backdropHandle) {\n\t\t\t\tthis.$backdropHandle.removeClass('in');\n\n\t\t\t\tvar that = this;\n\t\t\t\t$.support.transition ?\n\t\t\t\t\tthis.$backdropHandle.one($.support.transition.end, function () { that.removeLoading() }) :\n\t\t\t\t\tthat.removeLoading();\n\n\t\t\t} else if (callback) {\n\t\t\t\tcallback(this.isLoading);\n\t\t\t}\n\t\t}\n\t};\n\n\t/* PRIVATE METHODS\n\t* ======================= */\n\n\t// computes and caches the zindexes\n\tvar getzIndex = (function () {\n\t\tvar zIndexFactor,\n\t\t\tbaseIndex = {};\n\n\t\treturn function (type, pos) {\n\n\t\t\tif (typeof zIndexFactor === 'undefined'){\n\t\t\t\tvar $baseModal = $('<div class=\"modal hide\" />').appendTo('body'),\n\t\t\t\t\t$baseBackdrop = $('<div class=\"modal-backdrop hide\" />').appendTo('body');\n\n\t\t\t\tbaseIndex['modal'] = +$baseModal.css('z-index');\n\t\t\t\tbaseIndex['backdrop'] = +$baseBackdrop.css('z-index');\n\t\t\t\tzIndexFactor = baseIndex['modal'] - baseIndex['backdrop'];\n\n\t\t\t\t$baseModal.remove();\n\t\t\t\t$baseBackdrop.remove();\n\t\t\t\t$baseBackdrop = $baseModal = null;\n\t\t\t}\n\n\t\t\treturn baseIndex[type] + (zIndexFactor * pos);\n\n\t\t}\n\t}());\n\n\t// make sure the event target is the modal itself in order to prevent\n\t// other components such as tabsfrom triggering the modal manager.\n\t// if Boostsrap namespaced events, this would not be needed.\n\tfunction targetIsSelf(callback){\n\t\treturn function (e) {\n\t\t\tif (e && this === e.target){\n\t\t\t\treturn callback.apply(this, arguments);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/* MODAL MANAGER PLUGIN DEFINITION\n\t* ======================= */\n\n\t$.fn.modalmanager = function (option, args) {\n\t\treturn this.each(function () {\n\t\t\tvar $this = $(this),\n\t\t\t\tdata = $this.data('modalmanager');\n\n\t\t\tif (!data) $this.data('modalmanager', (data = new ModalManager(this, option)));\n\t\t\tif (typeof option === 'string') data[option].apply(data, [].concat(args))\n\t\t})\n\t};\n\n\t$.fn.modalmanager.defaults = {\n\t\tbackdropLimit: 999,\n\t\tresize: true,\n\t\tspinner: '<div class=\"loading-spinner fade\" style=\"width: 200px; margin-left: -100px;\"><div class=\"progress progress-striped active\"><div class=\"bar\" style=\"width: 100%;\"></div></div></div>',\n\t\tbackdropTemplate: '<div class=\"modal-backdrop\" />'\n\t};\n\n\t$.fn.modalmanager.Constructor = ModalManager\n\n\t// ModalManager handles the modal-open class so we need \n\t// to remove conflicting bootstrap 3 event handlers\n\t$(function () {\n\t\t$(document).off('show.bs.modal').off('hidden.bs.modal');\n\t});\n\n}(jQuery);\n"],"sourceRoot":"/source/"}